// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Users {
  id            String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email         String  @unique
  username      String  @unique
  password      String
  twoAuthOn     Boolean @default(false)
  twoAuthSecret String?
  apiToken      String?
  connectedChat Boolean @default(false)
}

model Message {
  id         String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  content    String
  senderId   String   @db.Uuid
  receiverId String   @db.Uuid
  createdAt  DateTime @default(now())
}

model ChatRestrict {
  id           String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  type         ChatRestrictType @default(MUTE)
  restrictedId String           @db.Uuid
  chatId       String           @db.Uuid
  createdAt    DateTime         @default(now())
}

model Channel {
  id          String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  displayName String      @unique
  type        ChannelType @default(PRIVATE)
  creatorId   String      @db.Uuid
  admins      String[]    @db.Uuid
  members     String[]    @db.Uuid
  createdAt   DateTime    @default(now())
}

enum ChannelType {
  PUBLIC
  PRIVATE
  PASSWORD
}

enum ChatRestrictType {
  BAN
  MUTE
}
